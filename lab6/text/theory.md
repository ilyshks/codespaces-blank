# Теория по ЛР №6

## TCP и TCP/IP
TCP (Transmission Control Protocol) — это протокол транспортного уровня, который обеспечивает надежную, последовательную и ориентированную на соединение передачу данных между приложениями, работающими в сети. TCP гарантирует, что данные будут доставлены без ошибок, в правильном порядке и без дубликатов.

TCP/IP (Transmission Control Protocol/Internet Protocol) — это набор протоколов, которые определяют, как данные передаются по сети. TCP/IP включает в себя несколько уровней, каждый из которых отвечает за определенную функцию:

Прикладной уровень: Определяет протоколы, используемые приложениями для обмена данными (например, HTTP, FTP, SMTP).

Транспортный уровень: Обеспечивает надежную передачу данных между приложениями (TCP, UDP).

Сетевой уровень: Определяет маршрутизацию пакетов данных между сетями (IP).

Канальный уровень: Обеспечивает передачу данных между устройствами в одной сети (Ethernet, Wi-Fi).

## TCP vs UDP
TCP и UDP — это два основных протокола транспортного уровня, которые используются для передачи данных по сети. Вот основные различия между ними:

Характеристика	TCP	UDP
Надежность:
TCP: Гарантирует доставку данных без ошибок, в правильном порядке и без дубликатов.	
UDP: Не гарантирует доставку данных. Пакеты могут быть потеряны, дублированы или приняты в неправильном порядке.
Соединение:	
TCP: Ориентирован на соединение. Перед передачей данных устанавливается соединение.	
UDP: Не ориентирован на соединение. Данные передаются без предварительного установления соединения.
Порядок доставки:	
TCP: Гарантирует, что данные будут доставлены в том порядке, в котором они были отправлены.	
UDP: Не гарантирует порядок доставки. Пакеты могут быть доставлены в произвольном порядке.
Скорость:
TCP: Медленнее, чем UDP, из-за механизмов надежности и управления потоком.
UDP: Быстрее, чем TCP, так как не использует механизмы надежности и управления потоком.
Примеры использования:
TCP: Веб-серверы, электронная почта, файловые передачи.	
UDP: Видео- и аудиостриминг, онлайн-игры, DNS.

## Системные вызовы для работы с сокетами

1. Системный вызов socket
Описание: Создает новый сокет и возвращает файловый дескриптор, который можно использовать для дальнейших операций с сокетом.

int socket(int domain, int type, int protocol);

domain: Семейство протоколов (например, AF_INET для IPv4, AF_INET6 для IPv6).
type: Тип сокета (например, SOCK_STREAM для TCP, SOCK_DGRAM для UDP).
protocol: Протокол (обычно 0, чтобы использовать протокол по умолчанию для данного типа сокета).

Возвращаемое значение: Файловый дескриптор сокета в случае успеха, -1 в случае ошибки.

2. Системный вызов bind
Описание: Связывает сокет с локальным адресом и портом.

int bind(int sockfd, const struct sockaddr *addr, socklen_t addrlen);

sockfd: Файловый дескриптор сокета.
addr: Указатель на структуру sockaddr, содержащую адрес и порт.
addrlen: Размер структуры sockaddr.

Возвращаемое значение: 0 в случае успеха, -1 в случае ошибки.

3. Системный вызов listen
Описание: Переводит сокет в режим прослушивания входящих соединений.

int listen(int sockfd, int backlog);

sockfd: Файловый дескриптор сокета.
backlog: Максимальное количество ожидающих соединений в очереди.

Возвращаемое значение: 0 в случае успеха, -1 в случае ошибки.

4. Системный вызов accept
Описание: Принимает входящее соединение на прослушивающем сокете и возвращает новый файловый дескриптор для работы с этим соединением.

int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);

sockfd: Файловый дескриптор прослушивающего сокета.
addr: Указатель на структуру sockaddr, куда будет записан адрес клиента.
addrlen: Указатель на переменную, содержащую размер структуры sockaddr.

Возвращаемое значение: Файловый дескриптор нового сокета в случае успеха, -1 в случае ошибки.

5. Системный вызов recv
Описание: Получает данные из сокета.

ssize_t recv(int sockfd, void *buf, size_t len, int flags);

sockfd: Файловый дескриптор сокета.
buf: Буфер для хранения полученных данных.
len: Максимальный размер буфера.
flags: Флаги, управляющие поведением функции (например, MSG_WAITALL для ожидания получения всех данных).

Возвращаемое значение: Количество полученных байт в случае успеха, 0 если соединение закрыто, -1 в случае ошибки.

6. Системный вызов send
Описание: Отправляет данные через сокет.

ssize_t send(int sockfd, const void *buf, size_t len, int flags);

sockfd: Файловый дескриптор сокета.
buf: Буфер с данными для отправки.
len: Размер буфера.
flags: Флаги, управляющие поведением функции (например, MSG_NOSIGNAL для подавления сигнала SIGPIPE).

Возвращаемое значение: Количество отправленных байт в случае успеха, -1 в случае ошибки.

7. Системный вызов close
Описание: Закрывает сокет и освобождает связанные с ним ресурсы.

int close(int fd);

fd: Файловый дескриптор сокета.

Возвращаемое значение: 0 в случае успеха, -1 в случае ошибки.

8. Системный вызов connect
Описание: Устанавливает соединение с удаленным сервером.

int connect(int sockfd, const struct sockaddr *addr, socklen_t addrlen);

sockfd: Файловый дескриптор сокета.
addr: Указатель на структуру sockaddr, содержащую адрес и порт сервера.
addrlen: Размер структуры sockaddr.

Возвращаемое значение: 0 в случае успеха, -1 в случае ошибки.